(()=>{"use strict";var e={958:e=>{var t={isMobile:e=>{const{type:t}=e;return"mobile"===t.slice(0,6)}};const{isMobile:r}=t;var n={getFieldElement:(e,t)=>r(e)?kintone.mobile.app.record.getFieldElement(t):kintone.app.record.getFieldElement(t),getFieldElements:(e,t)=>r(e)?kintone.mobile.app.getFieldElements(t):kintone.app.getFieldElements(t)};const{isMobile:a}=t,{isMobile:o}=t,{getFieldElement:i,getFieldElements:c}=n;var s={isMobile:o,getFieldElement:i,getFieldElements:c,getSpaceElement:(e,t)=>a(e)?kintone.mobile.app.record.getSpaceElement(t):kintone.app.record.getSpaceElement(t),getDateString:(e,t=new Date)=>{const r=t.getFullYear().toString(),n=(t.getMonth()+1).toString().padStart(2,"0"),a=t.getDate().toString().padStart(2,"0");let o;switch(e){case"yyyymmdd":default:o=`${r}${n}${a}`;break;case"yymmdd":o=`${r.slice(2,4)}${n}${a}`;break;case"yyyy-mm-dd":o=`${r}-${n}-${a}`;break;case"yyyymm":o=`${r}${n}`;break;case"yymm":o=`${r.slice(2,4)}${n}`}return o}};e.exports=s}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}(()=>{var e=r(958);const t=async e=>{try{const t=kintone.api.url("/k/v1/records"),r=await kintone.api(t,"GET",e),{records:n}=r;return n}catch(e){console.error(e)}},n=(e,t)=>{if(!t)throw new Error('getFieldValueArray: params "fieldCode" is required');if(!e||0===e.length)throw new Error('getFieldValueArray: params "records" cannot be an empty array');return e.map((e=>e[t].value))},a=(e,t="Dropdown")=>({label:t,items:e.map((e=>({label:e,value:e})))}),o="商品系列",i="商品型號",c="商品名稱",s={series:{app:50,query:`\n      啟用狀態 in ("啟用")\n      order by ${o} asc\n    `},product:{app:48}},l=["app.record.create.show","app.record.edit.show"],d=async r=>{try{const l=await t(s.series),d=n(l,o),p=a(d,"選擇商品系列"),m=new Kuc.Dropdown(p),u=(0,e.getSpaceElement)(r,"product-series"),g=(0,e.getSpaceElement)(r,"product-id");return u.appendChild(m),m.addEventListener("change",(async e=>{const r=e.target.value;s.product.query=`\n          ${o} in ("${r}")\n          order by ${i} asc\n        `;const l=await t(s.product),d=n(l,i),p=a(d,"選擇商品型號"),m=new Kuc.Dropdown(p);g.innerHTML="",g.appendChild(m),m.addEventListener("change",(async e=>{const r=e.target.value;s.product.query=`\n            ${i} = "${r}"\n          `;const n=(await t(s.product))[0][c].value,a=kintone.app.record.get();a.record[c].value=n,a.record[c].lookup=!0,kintone.app.record.set(a)}))})),r}catch(e){return console.error(e),r.error="Something wrong!",r}};Kucs["1.17.0"],kintone.events.on(l,d)})()})();